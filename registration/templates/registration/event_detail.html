{% extends "registration/base.html" %}

{% block title %}{{ event.title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h1>{{ event.title }}</h1>
    </div>
    <div class="card-body">
        <p><strong>Date:</strong> {{ event.date|date:"F d, Y, P" }}</p>
        <p><strong>Location:</strong> {{ event.location }}</p>
        <p>{{ event.description }}</p>

        {% if user.is_authenticated %}
            {% if is_registered %}
                <p class="text-success">You are already registered for this event.</p>
                <a href="{% url 'my_registrations' %}" class="btn btn-info">View My Registrations</a>
            {% else %}
                <form action="{% url 'event_register' event.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-success">Register for this Event</button>
                </form>
            {% endif %}
        {% else %}
            <p><a href="{% url 'login' %}?next={{ request.path }}">Login</a> to register for this event.</p>
        {% endif %}
    </div>
    <div class="card-footer">
        <a href="{% url 'event_list' %}" class="btn btn-secondary">Back to Events List</a>
    </div>
</div>
{% endblock %}